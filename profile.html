<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UniPortal - Профиль</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="stylesheet" href="styles/profile.css">

</head>
<body class="font-display bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-200">
    <!-- Контейнер приложения -->
    <div class="dashboard-container">
        <!-- Боковая навигация (для десктопа) -->
        <nav id="desktop-nav" class="desktop-nav">
            <!-- Логотип -->
            <div class="nav-header">
                <div class="logo-container">
                    <span class="material-symbols-outlined logo-icon">school</span>
                    <span class="logo-text">UniPortal</span>
                </div>
            </div>
            
            <!-- Навигационные ссылки -->
            <div class="nav-content">
                <div class="nav-links">
                    <a href="dashboard.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">dashboard</span>
                        <span class="nav-text">Панель управления</span>
                    </a>
                    <a href="materials.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">book</span>
                        <span class="nav-text">Материалы</span>
                    </a>
                    <a href="calendar.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">calendar_month</span>
                        <span class="nav-text">Календарь</span>
                    </a>
                    <a href="schedule.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">schedule</span>
                        <span class="nav-text">Расписание</span>
                    </a>
                    <a href="chat.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">chat</span>
                        <span class="nav-text">Чат</span>
                    </a>
                    <a href="journal.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">edit_note</span>
                        <span class="nav-text">Журнал</span>
                    </a>
                    <a href="information.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">info</span>
                        <span class="nav-text">Информация</span>
                    </a>
                </div>
                
                <!-- Профиль пользователя -->
                <div class="user-profile">
                    <div class="profile-content">
                        <div class="avatar user-profile-name-fletter" id="profile-avatar"></div>
                        <div class="profile-info">
                            <p class="profile-name user-profile-name" id="profile-name"></p>
                            <p class="profile-email" id="profile-email">student@uniportal.ru</p>
                        </div>
                        <a href="profile.html" class="profile-link active">
                            <span class="material-symbols-outlined">person</span>
                        </a>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Мобильная навигация (скрытое меню) -->
        <nav id="mobile-nav" class="mobile-nav">
            <!-- Логотип и кнопка закрытия -->
            <div class="mobile-nav-header">
                <div class="logo-container">
                    <span class="material-symbols-outlined logo-icon">school</span>
                    <span class="logo-text">UniPortal</span>
                </div>
                <button id="close-mobile-nav" class="close-nav-btn">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            
            <!-- Навигационные ссылки -->
            <div class="mobile-nav-content">
                <div class="nav-links">
                    <a href="dashboard.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">dashboard</span>
                        <span class="nav-text">Панель управления</span>
                    </a>
                    <a href="materials.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">book</span>
                        <span class="nav-text">Материалы</span>
                    </a>
                    <a href="calendar.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">calendar_month</span>
                        <span class="nav-text">Календарь</span>
                    </a>
                    <a href="schedule.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">schedule</span>
                        <span class="nav-text">Расписание</span>
                    </a>
                    <a href="chat.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">chat</span>
                        <span class="nav-text">Чат</span>
                    </a>
                    <a href="journal.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">edit_note</span>
                        <span class="nav-text">Журнал</span>
                    </a>
                    <a href="information.html" class="nav-link">
                        <span class="material-symbols-outlined nav-icon">info</span>
                        <span class="nav-text">Информация</span>
                    </a>
                </div>
                
                <!-- Профиль пользователя -->
                <div class="mobile-user-profile">
                    <div class="profile-content">
                        <div class="avatar user-profile-name-fletter" id="mobile-profile-avatar"></div>
                        <div class="profile-info">
                            <p class="profile-name user-profile-name" id="mobile-profile-name"></p>
                            <p class="profile-email" id="mobile-profile-email">student@uniportal.ru</p>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        
        <!-- Затемнение для мобильного меню -->
        <div id="mobile-nav-overlay" class="mobile-nav-overlay"></div>
        
        <!-- Основной контент -->
        <main class="main-content">
            <!-- Верхняя панель -->
            <header class="main-header">
                <div class="header-content">
                    <!-- Левая часть: гамбургер-меню и заголовок -->
                    <div class="header-left">
                        <button id="open-mobile-nav" class="mobile-menu-btn">
                            <span class="material-symbols-outlined menu-icon">menu</span>
                        </button>
                        <div class="header-titles">
                            <h1 class="page-title">Профиль и настройки</h1>
                            <p class="page-subtitle">Управление профилем и настройками аккаунта</p>
                        </div>
                    </div>
                    
                    <!-- Правая часть: поиск, уведомления, профиль -->
                    <div class="header-right">
                        <!-- Поиск (скрыт на мобильных) -->
                        <div class="search-container">
                            <span class="material-symbols-outlined search-icon">search</span>
                            <input type="text" placeholder="Поиск..." class="search-input">
                        </div>
                        
                        <!-- Кнопка уведомлений -->
                        <button class="notification-btn">
                            <span class="material-symbols-outlined">notifications</span>
                            <span class="notification-badge">
                                <span class="notification-ping"></span>
                                <span class="notification-dot"></span>
                            </span>
                        </button>
                        
                        <!-- Профиль (только аватар на мобильных) -->
                        <a href="profile.html" class="profile-btn">
                            <div class="mobile-avatar user-profile-name-fletter" id="header-profile-avatar"></div>
                            <span class="profile-name-text user-profile-name" id="header-profile-name"></span>
                        </a>
                    </div>
                </div>
                
                <!-- Описание для мобильных -->
                <p class="mobile-subtitle">Управление профилем и настройками аккаунта</p>
            </header>
            
            <!-- Основное содержимое -->
            <div class="content-area">
                <div class="content-container">
                    <!-- Основная информация профиля -->
                    <div class="profile-section">
                        <div class="profile-card">
                            <h2 class="profile-card-title">Основная информация</h2>
                            
                            <div class="profile-info-grid">
                                <!-- Фото профиля -->
                                <div class="profile-avatar-section">
                                    <div class="profile-avatar-wrapper">
                                        <div class="profile-avatar" id="main-profile-avatar">
                                            <span class="avatar-text user-profile-name-fletter"></span>
                                        </div>
                                        <button class="avatar-change-btn" onclick="document.getElementById('avatarInput').click()">
                                            <span class="material-symbols-outlined">photo_camera</span>
                                        </button>
                                        <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                                    </div>
                                    <div class="profile-avatar-info">
                                        <p class="profile-role-student">Студент</p>
                                        <p class="profile-activity">В системе с 15 сент. 2024</p>
                                    </div>
                                </div>
                                
                                <!-- Личная информация -->
                                <div class="personal-info">
                                    <div class="form-group">
                                        <label class="form-label" for="profileNickname">Никнейм</label>
                                        <input type="text" id="profileNickname" class="form-input" value="ИванСтудент">
                                        <p class="form-hint">Ваш уникальный никнейм в системе</p>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="profileEmail">Email</label>
                                        <input type="email" id="profileEmail" class="form-input" value="student@uniportal.ru">
                                        <p class="form-hint">Используется для входа и уведомлений</p>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="profileGroup">Группа</label>
                                        <input type="text" id="profileGroup" class="form-input" value="ИСП-21-1" disabled>
                                        <p class="form-hint">Группа назначается при регистрации и не может быть изменена</p>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label" for="profileRole">Роль</label>
                                        <input type="text" id="profileRole" class="form-input" value="Студент" disabled>
                                        <p class="form-hint">Ваша роль в системе</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button id="saveProfileBtn" class="btn-primary">
                                    <span class="material-symbols-outlined">save</span>
                                    Сохранить изменения
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Статистика активности -->
                    <div class="stats-section">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <span class="material-symbols-outlined">book</span>
                                </div>
                                <div class="stat-info">
                                    <p class="stat-value">42</p>
                                    <p class="stat-label">Пройдено материалов</p>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <span class="material-symbols-outlined">task_alt</span>
                                </div>
                                <div class="stat-info">
                                    <p class="stat-value">85%</p>
                                    <p class="stat-label">Прогресс обучения</p>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <span class="material-symbols-outlined">forum</span>
                                </div>
                                <div class="stat-info">
                                    <p class="stat-value">156</p>
                                    <p class="stat-label">Сообщений в чате</p>
                                </div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <span class="material-symbols-outlined">calendar_month</span>
                                </div>
                                <div class="stat-info">
                                    <p class="stat-value">95%</p>
                                    <p class="stat-label">Посещаемость</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Настройки -->
                    <div class="settings-section">
                        <div class="settings-grid">
                            <!-- Уведомления -->
                            <div class="settings-card">
                                <h3 class="settings-card-title">
                                    <span class="material-symbols-outlined">notifications</span>
                                    Уведомления
                                </h3>
                                
                                <div class="settings-options">
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Новые объявления</span>
                                            <span class="setting-description">Уведомлять о новых объявлениях</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Дедлайны заданий</span>
                                            <span class="setting-description">Напоминания о сроках сдачи</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Личные сообщения</span>
                                            <span class="setting-description">Уведомления о новых сообщениях</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Обновления расписания</span>
                                            <span class="setting-description">Изменения в расписании занятий</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Внешний вид -->
                            <div class="settings-card">
                                <h3 class="settings-card-title">
                                    <span class="material-symbols-outlined">palette</span>
                                    Внешний вид
                                </h3>
                                
                                <div class="theme-options">
                                    <button class="theme-option active" data-theme="light">
                                        <span class="material-symbols-outlined">light_mode</span>
                                        Светлая
                                    </button>
                                    <button class="theme-option" data-theme="dark">
                                        <span class="material-symbols-outlined">dark_mode</span>
                                        Тёмная
                                    </button>
                                    <button class="theme-option" data-theme="auto">
                                        <span class="material-symbols-outlined">devices</span>
                                        Авто
                                    </button>
                                </div>
                                
                                <div class="settings-options">
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Компактный режим</span>
                                            <span class="setting-description">Уменьшить отступы интерфейса</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox">
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Конфиденциальность -->
                            <div class="settings-card">
                                <h3 class="settings-card-title">
                                    <span class="material-symbols-outlined">lock</span>
                                    Конфиденциальность
                                </h3>
                                
                                <div class="settings-options">
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Видимый профиль</span>
                                            <span class="setting-description">Другие студенты могут видеть ваш профиль</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Показывать прогресс</span>
                                            <span class="setting-description">Показывать ваш прогресс обучения</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                    
                                    <div class="setting-option">
                                        <label class="setting-label">
                                            <span>Онлайн статус</span>
                                            <span class="setting-description">Показывать, когда вы онлайн</span>
                                        </label>
                                        <label class="toggle-switch">
                                            <input type="checkbox" checked>
                                            <span class="toggle-slider"></span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Безопасность -->
                            <div class="settings-card">
                                <h3 class="settings-card-title">
                                    <span class="material-symbols-outlined">security</span>
                                    Безопасность
                                </h3>
                                
                                <div class="security-options">
                                    <button class="security-btn" id="changePasswordBtn">
                                        <span class="material-symbols-outlined">key</span>
                                        Изменить пароль
                                    </button>
                                    
                                    <button class="security-btn" id="sessionHistoryBtn">
                                        <span class="material-symbols-outlined">history</span>
                                        История сессий
                                    </button>
                                    
                                    <button class="security-btn logout-btn" id="logoutBtn">
                                        <span class="material-symbols-outlined">logout</span>
                                        Выйти из аккаунта
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Футер -->
            <footer class="main-footer">
                <p class="footer-text">© 2025 UniPortal. Академическая платформа.</p>
            </footer>
        </main>
        
        <!-- Кнопка переключения темы -->
        <button id="theme-toggle" class="theme-toggle">
            <span class="material-symbols-outlined theme-icon">dark_mode</span>
        </button>
        
        <!-- Модальное окно смены пароля -->
        <div id="passwordModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">Изменение пароля</h3>
                    <button class="modal-close" id="closePasswordModal">
                        <span class="material-symbols-outlined">close</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">    
                        <label class="form-label" for="currentPassword">Текущий пароль</label>
                        <input type="password" id="currentPassword" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="newPassword">Новый пароль</label>
                        <input type="password" id="newPassword" class="form-input">
                        <p class="form-hint">Минимум 8 символов, включая цифры и буквы</p>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="confirmPassword">Подтвердите пароль</label>
                        <input type="password" id="confirmPassword" class="form-input">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancelPasswordChange">Отмена</button>
                    <button class="btn-primary" id="savePasswordBtn">Сохранить пароль</button>
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/users.js"></script>
    <script src="scripts/session.js"></script>
    <script>
        window.addEventListener('load', () => {
            checkAuth("index.html");
        });
    </script>
    <script src="scripts/profile.js"></script>
    <script src="scripts/per-main.js"></script>
    </body>
</html>